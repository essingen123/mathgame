<!DOCTYPE html>
<html>

<head>

    <link rel="icon" type="image/png" href="./favicon-32x32.png">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <title>1000 Decimals of Pi • MATH GAME v0.007a • 😀 Coded on a Mobile FastSpaghetti Prototype</title>
    <!-- 😀 Coded mostly on a Mobile, Fast Prototype . So intentionally not made with quality code, just to test out if it works -->
    <!-- <link href="./custom.css" rel="stylesheet"> -->
    <link href="https://fonts.cdnfonts.com/css/games" rel="stylesheet">
    <!-- @import url('http://fonts.cdnfonts.com/css/games'); -->
    <style>
        @import url('https://fonts.cdnfonts.com/css/games');
        .buttons {
            width: 100%;
            border-radius: 16px;
            display: inline-block;
            bottom: 0;
            /* background: radial-gradient(circle at 30% 60%, #4CAF5055 12%, #5bcF6055 50%); */
            background: radial-gradient(circle at 30% 60%, #22212155 12%, #00000055 50%);
            background-color: #3d3a3e;
            padding: 6px 0 3px 0;
            max-width: 900px;
            max-height: 50%;
            text-align: center;
            opacity: 1;
            margin: 0;
        }
        
        #score2 {
            text-align: center;
            display: block;
            max-width: 100%;
            white-space: pre-wrap;
            word-break: break-all;
            word-wrap: break-word;
            font-size: 1.5em;
            text-shadow: 0 0 20px #ffffff, 0 0 70px #ffeec8;
            letter-spacing: -4px;
            line-height: 2rem;
            padding-top: 1px;
            margin-top: -24px;
        }
        
        * {
            box-sizing: border-box;
        }
        
        .hint {
            position: fixed;
            margin: 1px auto;
            left: 0;
            right: 0;
            opacity: 0;
            top: 50px;
            width: 240px;
            height: 120px;
            background-color: #fff;
            color: #fb5;
            display: inline-block;
            font-weight: 700;
            font-style: italic;
            animation-name: fadeout;
            animation-duration: 2.2s;
            z-index: 399;
            font-size: 500%;
            border-radius: 50%;
            border: 9px solid #acd3ac55;
        }
        
        @keyframes blinkfade {
            0% {
                opacity: 1;
            }
            100% {
                opacity: 0.5;
            }
        }
        
        .answer2 {
            animation-name: blinkfade;
            animation-duration: 0.8s;
            animation-iteration-count: infinite;
            /* animation-fill-mode: both; */
            /* animation-timing-function: ease-in-out; */
            text-align: center;
            display: inline-block;
            margin: 0 auto;
            left: 0;
            right: 0;
            margin-top: -50px;
            position: fixed;
            max-width: 100%;
            white-space: pre-wrap;
            word-break: break-all;
            word-wrap: break-word;
            font-size: 2em;
            text-shadow: 0 0 20px #aa9977aa, 0 0 40px #ffbb3388;
            letter-spacing: -4px;
            line-height: 2.4rem;
            padding-top: 8px;
            color: #ffffffbb;
            font-size: 175%;
            font-style: italic;
            font-weight: bolder;
        }
        
        @keyframes fadeout {
            0% {
                opacity: .5;
                top: 60px;
            }
            10% {
                opacity: 1;
                top: 100px;
            }
            40% {
                opacity: .8;
                top: 80px;
            }
            100% {
                opacity: 0;
                top: 50px;
            }
        }
        
        .i3 {
            text-align: center;
            background-color: #fb5;
            background-image: linear-gradient(315deg, #ff4e00 0%, #ec9f05 74%);
            font-style: italic;
            border: 6px solid #efefef99;
            width: 98%;
            padding: 1px;
            color: #fff;
            font-size: 330%;
            height: 86px;
            display: block;
            margin: 2px auto 3px auto;
        }
        
        .scoreoverlay {
            margin-top: 1900px;
            display: none;
            opacity: 1;
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: 100;
            left: 0;
            top: 0;
            background: radial-gradient(circle at 50% 30%, #f22f2299, #f29 40%);
            font-size: 120%;
            color: #fff;
            font-weight: 700er;
            font-style: italic;
            padding-top: 20px;
            border-radius: 30px;
            animation-name: fadein;
            animation-duration: .6s;
        }
        
        @keyframes fadein {
            0% {
                opacity: 0;
                top: -40px;
            }
            100% {
                opacity: 1;
                top: 0;
            }
        }
        
        .show {
            display: block;
            margin-top: 0;
            border-radius: 0;
        }
        
        : root {
            --fbpowro: -3deg;
            --fbpowoutho: -3deg;
            --startpos: 1%;
        }
        
        .fbpow {
            position: fixed;
            display: block;
            left: 0;
            right: 0;
            margin: 2px auto;
            opacity: 0;
            width: 150px;
            height: 112px;
            background-color: rgba(163, 220, 71, .3);
            border-radius: 50%;
            text-align: center;
            border: solid 120px #99e49911;
            font-size: 170%;
            z-index: 200;
            padding-top: 30px;
            filter: drop-shadow(2px 2px 13px #ffeefa);
            color: #fff;
            animation-duration: 1.5s;
            animation-name: fbpow;
            animation-timing-function: cubic-bezier(-.175, .885, .32, -.275);
            z-index: 200;
        }
        
        @keyframes fbpow {
            0% {
                bottom: 32%;
                transform: rotateZ(var(--fbpowro));
                left: var(--fbpowstartpos);
            }
            60% {
                opacity: 1;
                bottom: 78%;
                border: solid 1px #ffffff33;
                transform: rotateZ(0deg);
            }
            100% {
                opacity: 0;
                bottom: 81%;
                transform: rotateZ(calc(var(--fbpowro)* -0.05));
            }
        }
        
        .score {
            position: absolute;
            top: 0;
            left: 0;
            padding: 5px;
        }
        
        .scorebar {
            display: block;
            margin: 0;
            padding: 0;
            width: 100%;
            height: 30px;
            position: absolute;
            top: 0;
        }
        
        .level {
            position: absolute;
            top: 0;
            right: 0;
            left: 0;
            padding-top: 5px;
            margin: 0 auto;
        }
        
        .hiscore {
            position: absolute;
            top: 0;
            right: 0;
            padding-top: 5px;
        }
        
        #scoring {
            display: block;
            background-color: #ccc;
            transition: all .5s ease-in-out;
        }
        
        .wrapper {
            background-color: #fefefe11;
            margin: 12px 0;
            padding: 0;
        }
        
        spansmall {
            line-height: 1rem;
            display: block;
            font-size: .7rem;
            padding: 8px;
            margin: 2px;
            animation-duration: 1.15s !important;
            animation-timing-function: cubic-bezier(0.455, 0.03, 0.515, 1.0955);
        }
        
        spansmall: nth-child(1) {
            animation-duration: 1.85s;
        }
        
        #timer {
            width: 1px;
            /* line-height: 0; */
            border: solid 2px #ddd;
            padding: 4px;
            text-align: center;
            border-radius: 6px;
            display: block;
            height: 24px;
            background: #fff;
            transition: all 1s ease-in-out;
            transition-timing-function: cubic-bezier(.2, .9, .3, 1.3);
            margin-bottom: -12px;
            margin-top: -14px;
        }
        
        .buttonswrapper {
            width: 100%;
            bottom: 0;
            position: absolute;
            /* background: radial-gradient(circle at 30% 60%, #4CAF5055, #449e4855 50%); */
            background: radial-gradient(circle at 30% 60%, #323232c8, #262626de 50%);
            /* background-color: #7CAF80; */
            padding: 42px 0 2px 0;
            text-align: center;
            min-height: 170px;
            max-height: 60%;
            border-radius: 12px 12px 0 0;
            margin: 0;
        }
        
        button {
            cursor: pointer;
            /* filter: drop-shadow(0 0 8px #94af84); */
            /* filter: drop-shadow(0 0 8px #4f4f4f); */
            /* filter: drop-shadow(0 0 12px rgb(90, 20, 80)); */
            /* background-color: #4CAF50; */
            background-color: #aeaeae;
            border: none;
            color: #fff;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 1.8rem;
            font-weight: 700;
            /* border: 2px solid #7d97; */
            border: 2px solid rgba(140, 140, 140, 0.5);
            border-radius: 12px;
            background: radial-gradient(circle at 60% 30%, #27c927, #1aa531 90%);
            margin: 0;
            padding: 10px 6px 8px 3px;
            max-height: 60px;
            width: 50%;
            min-height: 38px;
        }
        
        .numkey {
            margin: 0 auto !important;
            /* not optimal really .. */
            /* background: radial-gradient(circle at 60% 30%, #838383, #303030 90%); */
            background: radial-gradient(circle at 50% 40%, #353535, #252525 90%);
            border: 1px solid rgba(84, 84, 84, 0.2);
            padding: 12px 5px 10px 5px;
            max-height: 60px;
            width: 32.5%;
            /* height: 24.2%; */
            min-height: 64px;
            max-height: 78px;
            font-size: 140%;
            color: rgb(223, 212, 228);
        }
        
        html,
        body,
        * {
            margin: 0 auto;
            /* not optimal really .. */
            text-align: center;
        }
        
        .game {
            margin: auto !important;
            /* not optimal really .. */
            text-align: center;
        }
        
        html,
        body {
            height: 100%;
            letter-spacing: 6px;
            margin: 0;
            padding: 0;
            text-align: center;
            touch-action: none !important;
            user-select: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        h1 {
            font-size: 1.8rem;
            color: #fefafa;
            font-family: 'Games', sans-serif, arial;
            white-space: pre;
            font-weight: 700er;
            display: block;
            width: 100%;
            padding: -12px auto 3px auto;
            text-align: center;
            color: #ffd8be;
            font-variant: small-caps;
            letter-spacing: 1px;
        }
        
        toptext {
            font-size: 1rem;
            color: #fefafa;
            font-family: 'Games', sans-serif, arial;
            white-space: pre;
            font-weight: 700er;
            display: block;
            width: 240px;
            position: absolute;
            left: 0;
            right: 0;
            top: 19px;
            margin: 25px auto 2px auto;
            text-align: center;
            background: rgb(131, 58, 180);
            /* background: linear-gradient(90deg, rgba(131, 58, 180, 1) 1%, rgba(139, 192, 117, 1) 20%, rgba(252, 176, 69, 1) 35%, rgba(253, 29, 29, 1) 50%, rgba(253, 185, 29, 1) 65%, rgba(150, 187, 107, 1) 80%, rgba(121, 29, 253, 1) 99%); */
            background: linear-gradient(90deg, rgba(58, 180, 66, 0.5) 1%, rgba(252, 176, 69, 1) 35%, rgba(253, 29, 29, 1) 50%, rgba(253, 185, 29, 1) 65%, rgba(58, 180, 66, 0.5) 99%);
            /* border-radius: 4%; */
            border-radius: 100%;
            opacity: 0.5;
            height: 8px;
            border: 1px solid #fff;
        }
        
        .ang {
            padding: 0;
            filter: drop-shadow(-2px 0 3px #fee);
            padding: 0;
            margin: 8px 0 1px;
        }
        
        body {
            font-family: "Trebuchet MS";
            color: #ccc;
            font-size: 1.1rem;
            overflow: none;
            background: radial-gradient(circle at 40% 30%, transparent, #6c6c6c55 50%);
            background-repeat: repeat;
            margin: 0;
            padding: 0;
        }
        
        i2 {
            background-color: #fae2d9;
            border-radius: 50%;
            padding: 1px 2px;
            color: #bca996;
            z-index: -1;
            border: 2px solid #fed;
            width: 50%;
            min-height: 120px;
            max-height: 180px;
            display: block;
            margin: 28px 4px;
            height: 420px;
            transition: all .5s ease-in-out;
            font-size: 220%;
        }
        
        i2::before {
            content: '';
        }
        
        gr {
            color: #dfc7b6;
            font-size: 50%;
        }
        
        .fox {
            position: absolute;
            display: block;
            margin: 2px auto;
            left: 0;
            right: 0;
            font-weight: 700er;
            text-shadow: 0 0 10px #decc10, 0 0 20px #ffffff, 0 0 30px #ffd2a2, 0 0 40px #ff9900, 0 0 50px #e66b00, 0 0 60px #f4a600, 0 0 70px #ffeec8;
        }
        
        .fo {}
        
        .fi {
            opacity: 1;
            animation-duration: .2s;
            animation-iteration-count: 1;
            animation-fill-mode: forwards;
            animation-timing-function: ease-in-out;
            animation-name: slidein;
        }
        
        @keyframes slidein {
            0% {
                opacity: 0;
            }
            100% {
                opacity: 1;
            }
        }
        
        .fa {
            opacity: 1;
            animation-duration: .2s;
            animation-iteration-count: 1;
            animation-fill-mode: forwards;
            animation-timing-function: ease-in-out;
            animation-name: slideout;
        }
        
        @keyframes slideout {
            0% {
                opacity: .6;
            }
            100% {
                opacity: 0;
            }
        }
        
        .redpow {
            animation-duration: 0.8s;
            animation-name: redpowani;
        }
        
        @keyframes redpowani {
            0% {
                color: #ce7a31;
                /* filter: hue-rotate(-2deg);  */
                /* opacity: 0.6; */
                /* background: radial-gradient(circle at 60% 30%, #292929, #707070 90%); */
                background-color: #e8e7e6;
            }
            100% {
                /* filter: hue-rotate(0deg);
     opacity: 1; */
                background-color: #ff9911;
            }
        }
        
        .greenpow {
            animation-duration: .8s;
            animation-name: greenpowani;
        }
        
        @keyframes greenpowani {
            0% {
                /* background-color: #77667744; */
                /* background-color: #77667744; */
                /* filter: hue-rotate(-62deg); 
    opacity: 0.5; */
                /* background: radial-gradient(circle at 60% 30%, #c5ffac, #707070 90%); */
            }
            100% {
                /* filter: hue-rotate(0deg);
     opacity: 1; */
                /* background-color: #ccffcc00; */
            }
        }
        
        body::before {
            top: 0;
            left: 0;
            margin: 0;
            padding: 0;
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(circle at 40% 30%, transparent, #dddedd55 50%);
        }
        
        .scorebar {
            display: inline-block;
            margin-top: 10px;
            margin-bottom: 4px;
            font-weight: 400;
            font-size: 80%;
            letter-spacing: 2px;
            max-width: 520px;
            text-align: center;
            position: relative;
            color: #fff;
            padding: 16px;
            /* margin-right:12px; */
        }
        
        b {
            letter-spacing: 0;
            padding: 12px;
            /* margin-left: 12px; */
        }
        
        #scoring {
            background-color: #fafafa99;
            padding: 12px;
            animation-duration: .5s;
            animation-name: slideinfromright;
            animation-timing-function: cubic-bezier(0.455, 0.03, 0.515, 1.0955);
        }
        
        #leveling {
            background-color: #91228087;
            padding: 12px;
            margin: 11px auto 12px auto;
            display: block;
            animation-duration: .85s;
            animation-name: fadein;
            animation-timing-function: cubic-bezier(0.455, 0.03, 0.515, 1.0955);
        }
        
        #hiscoring {
            background-color: #fafafacc;
            padding: 12px;
            animation-duration: .85s;
            animation-name: slideinfromleft;
            animation-timing-function: cubic-bezier(0.455, 0.03, 0.515, 1.0955);
        }
        
        .slideinfromleft {
            animation-duration: .5s;
            animation-name: slideinfromleft;
        }
        
        @keyframes slideinfromleft {
            0% {
                opacity: 0;
                transform: translateX(-100%);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .slideinfromright {
            animation-duration: .5s;
            animation-name: slideinfromright;
        }
        
        @keyframes slideinfromright {
            0% {
                opacity: 0;
                transform: translateX(100%);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }
    </style>
</head>

<body>
    <!-- <div class="hint"></div> -->
    <div id="gamediv">
        <input type="hidden" class="number" pattern=[0-9]* id="answer" name="answer" />

        <input type="hidden" value="" id="eval" />
        <div id="scoreoverlay" class="scoreoverlay">
            <div>🏹</div>
            <div class="wrapper">
                <h1>Math Game</h1>
                <spansmall class="slideinfromleft">1000 Decimals of Pi !<br /> How many can you crank <br /> before time's up?<br /> <br />
                </spansmall>
            </div>
            <div id="scoring"> SCORE <b id="score3"></b> </div>
            <div id="leveling"> LVL <b id="level3"></b> </div>
            <div id="hiscoring"> HISCORE <b id="hiscore3"></b> </div>
            <br /> <button onclick="newround()">GO⚡️</button>
            <spansmall class="slideinfrom"><br /> Coded to an estimated ~99% on a mobile phone, as a mobile-XP first<br />
                <br /> <br />

            </spansmall>
        </div>
        <toptext>
            <!-- ⚠️--->
        </toptext>
        <div class="scorebar">
            <span class=score>SCORE <b id="score"></b> </span>
            <span class=level> LVL <b id="level"></b> </span>
            <span class=hiscore> HISCORE <b id="hiscore"></b> </span>
        </div>
    </div>
    <div id='timer'></div><br />

    <div id="i3" class="i3"></div><br />

    <div id="score2"></div>
    <div class="buttonswrapper">
        <span id="answer2" class="answer2"></span>
        <div id="buttons" class="buttons"> </div>
    </div>
    <div class="fb" id="fb"></div>

    </div>
    <script>
        var soundx;
        const canVibrate = window.navigator.vibrate


        mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);
        eventtyper = mobile ? "touchstart" : "mousedown";
        var diff = 0;
        var arrayblaha = 1;
        var delement3 = [];
        var start, previousTimeStamp, timestamp, counttime;
        var score = 0; // starting score
        var level = 1; // starting 

        /* get hiscore from local storage */
        var hiscore = localStorage.getItem("hiscore");
        if (hiscore == null) {
            //hiscore = 84/8
            hiscore = 5;
        }



        var maxcountime = 310; // max time left in..  pixels ;-D
        // var pluscount = 203; //how much extra time per right answer 
        // var speedish = 0.089; // starting speed
        var pluscount = 300; //how much extra time per right answer 

        var speedish = 0.02; // startspeed for the very first question
        // var speedish = 0.3; // starting speed for testing, too fast for prod
        var speedincrease = 0.005; //may rather be in blocks of levels or per question

        var levelspeedincrease = 0.03; // became starting speed

        var alternate, diffspin = 0; // can use score, but it might change in the future


        document.getElementById('score').innerHTML = score;
        document.getElementById('hiscore').innerHTML = hiscore;
        document.getElementById('level').innerHTML = level;

        document.getElementById('score3').innerHTML = score;
        document.getElementById('hiscore3').innerHTML = hiscore;


        document.getElementById('level3').innerHTML = level;

        function check() {
            answered = document.getElementById('answer').value;


            if (answered == document.getElementById('eval').value) {
                //CORRECT! 

                Array.from(document.getElementsByClassName("fi")).map(el => {
                    el.classList.add("fa");
                });


                document.getElementById('answer').value = '';
                document.getElementById('answer2').innerHTML = '_';



                next();
                score++;

                if (score % 10 === 0) {
                    document.getElementById('score2').innerHTML = "";
                    scorez = score;
                    for (let i = 0; i < Math.floor(score / 100); i++) {
                        document.getElementById('score2').innerHTML += "🔮";
                        scorez = scorez - 100; // buggy  time to fix
                    }
                    // console.log(scorez);
                    for (let i = 0; i < Math.floor(scorez / 10); i++) {
                        document.getElementById('score2').innerHTML += "💎";
                    }
                    document.getElementById('score2').innerHTML += "<br />";
                } else {
                    document.getElementById('score2').innerHTML += "⭐️";
                }

                try {
                    soundx.removeEffect(flanger);
                } catch (error) {

                }

                try {
                    soundx.removeEffect(dubDelay);


                    // window.navigator.vibrate(100);
                    // soundx.removeEffect(stereoDelay);
                } catch (error) {
                    //     console.log(error);
                }


                try {
                    soundx.removeEffect(stereoPanner);
                } catch (error) {
                    //     console.log(error);
                }

                try {
                    soundx.removeEffect(stereoPanner2);
                } catch (error) {
                    //     console.log(error);
                }


                soundx = sound.clone();
                // soundx.attack = 0.6;
                // soundx.volume = 0.9;

                soundx.addEffect(flanger);


                soundx.addEffect(dubDelay);

                //    soundx.addEffect(stereoDelay);
                //   soundx.removeEffect(dubDelay);

                //                soundx.sourceNode.playbackRate.value = 2;
                //  soundx.playbackRate.value = 2;
                //
                //soundx.playbackRate = 0.9; // try something between 0.25 and 3
                // soundx.rate = 2;
                // soundx.pitch = 2;
                //soundx.playbackRate.value = 2;
                // soundx.playbackRate = 2;

                switch (score % 2) {
                    case 0:
                        try {
                            soundx.addEffect(stereoPanner);
                        } catch (error) {}
                        break;
                    case 1:
                        try {
                            soundx.addEffect(stereoPanner2);
                        } catch (error) {}
                        break;
                }

                // soundx.play(0.05, 0.079);
                soundx.play(0.01, 0.13);




                switch (-1 + score % 10) {
                    case 0:
                        soundx.sourceNode.playbackRate.value = 1;
                        // soundx.sourceNode.playbackRate.value = 0.5;
                        break;
                    case 1:
                        soundx.sourceNode.playbackRate.value = 0.75;
                        break;
                    case 2:
                        soundx.sourceNode.playbackRate.value = 1.25;
                        break;

                    case 3:
                        soundx.sourceNode.playbackRate.value = 1.125;

                        //soundx.sourceNode.playbackRate.value = 1.125;
                        break;
                    case 4:
                        soundx.sourceNode.playbackRate.value = 1.5;
                        break;

                    case 5:
                        // soundx.sourceNode.playbackRate.value = 1.25;
                        soundx.sourceNode.playbackRate.value = 0.875;
                        break;
                    case 6:
                        soundx.sourceNode.playbackRate.value = 1.005;
                        break;
                    case 7:
                        soundx.sourceNode.playbackRate.value = 1.253;
                        break;
                    case 8:
                        soundx.sourceNode.playbackRate.value = 1.505;
                        break;
                        // case 9:
                        //     soundx.sourceNode.playbackRate.value = 2.75;
                        //     break;
                    case 9:
                        soundx.sourceNode.playbackRate.value = 0.0997;
                        break;

                }




                if (hiscore < score) {
                    hiscore++;
                }


                // level = 1+ Math.round(score / 10 - score*0.03,0);
                level = 1 + Math.round(score / 10 - score * 0.03, 0);



                document.getElementById('score').innerHTML = score;
                document.getElementById('hiscore').innerHTML = hiscore;
                document.getElementById('level').innerHTML = level;

                delement4 = document.getElementById('buttons');
                delement4.classList.add("greenpow");
                setTimeout(() => delement4.classList.remove('greenpow'), 500);

                alternate == -1 ? alternate = 1 : alternate = -1;

                let diffspin2 = 0.1 * (elapsed - diff);
                if (diffspin2 > 1) {
                    diffspin2 = 1;
                }
                diffspin = Math.abs(1200 / diffspin2) - 0.8 * diffspin;

                // diffspin = -1000 * Math.abs(1200 / diffspin);

                document.documentElement.style.setProperty('--fbpowro', 0.5 * alternate * diffspin + 'deg');

                if (alternate == -1) {
                    document.documentElement.style.setProperty('--fbpowstartpos', -100 + '%');
                } else {
                    document.documentElement.style.setProperty('--fbpowstartpos', 100 + '%');
                }

                diff = elapsed;
                arrayblaha++;
                arrayblaha = arrayblaha % 3;
                delement3[arrayblaha] = document.getElementById('fb').cloneNode();
                delement3[arrayblaha] = document.body.appendChild(delement3[arrayblaha]);
                delement3[arrayblaha].innerHTML = "⭐️" + answered + "😀";
                delement3[arrayblaha].classList.add("fbpow");
                delement3.forEach(function(el) {
                    el.addEventListener("animationend", function() {
                        el.innerHTML = "";
                        el.remove();
                    }, false);
                });

                counttime = counttime + pluscount;



                speedish = levelspeedincrease + level * speedincrease;
                // speedish += speedincrease;
                let transitionspeed = 1 - Math.round(5 * speedish, 4);
                // console.log(transitionspeed);
                document.getElementById('timer').style.transitionDuration = transitionspeed + 's';



            } else {
                // NOT CORRECT.. YET! 
                // delement2 = document.getElementById('buttons');
                // delement2.classList.add("redpow");
                // setTimeout(() => delement2.classList.remove('redpow'), 800);

                //console.log("???");
                sethint();

                // supprt for future MANY CHARACTERS
                if (answered.length >= document.getElementById('eval').value.length) {

                    //document.getElementById('answer').value = '';
                    //   document.getElementById('answer2').innerHTML = '_';
                    // sethint();
                }

            }
        }

        function makebuttons() {
            var arry = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0];
            arry.forEach(iok => {
                document.getElementById('buttons').innerHTML += "<button class='numkey' value='" + iok + "'>" + iok + "</button>";
                if (iok == 9)
                    document.getElementById('buttons').innerHTML += "<button class='numkey' value='clear'>❌</button>";
                if (iok == 0)
                    document.getElementById('buttons').innerHTML += "<button class='numkey' id='check' value=''>⚡️</button>";
            });
            var elements = document.getElementsByClassName("numkey");
            var myFunction = function() {




                this.classList.add("redpow");
                setTimeout(() => this.classList.remove('redpow'), 800);



                if (canVibrate) window.navigator.vibrate(10);
                var attribute = this.getAttribute("value");
                if (attribute == "clear") {
                    document.getElementById('answer').value = '';
                    document.getElementById('answer2').innerHTML = '_';
                    next();
                } else {
                    document.getElementById('answer').value += attribute;
                    document.getElementById('answer2').innerHTML += attribute;
                    check();
                }
            }
            for (var i = 0; i < elements.length; i++) {
                elements[i].addEventListener(eventtyper, myFunction, false);
            }

            // hint the right answer :)
            var hint = function() {
                //  var attribute = this.getAttribute("value");


                d = document.createElement("div");
                d.classList.add("hint");
                d.setAttribute("id", "hint");
                d.innerHTML = (document.getElementById('eval').value);
                document.body.append(d);




            }
            document.getElementById('check').addEventListener(eventtyper, hint, false);


            window.addEventListener("keydown", function(event) {
                if (event.defaultPrevented) {
                    return;
                }
                if (start === undefined) {
                    newround();
                }
                document.getElementById('answer').value += event.key;
                document.getElementById('answer2').innerHTML += event.key;
                check();


                //   event.preventDefault();
            }, true);
        }
        const dl = () => {
            reset();
            startscreen();
            makebuttons();
        }
        var q = z = w = 0;

        function evalQ(a) {
            try {
                return eval(a);
            } catch (error) {
                return error;
            }
        }
        const v = (a) => {
            d = document.createElement("div");
            d.classList.add("fox");
            // d.classList.add("ang");
            let a2 = a.replace('*', '•');
            d.innerHTML = (a2);

            document.getElementById('i3').append(d);
            //	 document.body.append(d);
            //document.body.append(d);
            d.classList.add("fi");
            let rightanswer = /* dont remove --->"" + */ "" + evalQ(a); // "" + convert to string
            document.getElementById('eval').value = rightanswer;

            sethint();

            w++;
        }
        var ar = [];

        function c(po) {
            ar.push(po);
        }

        function next() {

            Array.from(document.getElementsByClassName("fox")).map(el => {
                // el.addEventListener("animationend", function () {
                el.innerHTML = "";
                el.remove();
                // console.log("removed");
                // }, false);
            });



            if (ar.length > 0) {
                v(ar.shift())
            } else {
                // ... 
                // if (q < 10) {
                //	 q++;
                //	 v(q);
                // } else {
                //	 v(q);
                // }

                // do not need to call rset here too... ?
                //  reset();
            }
        }
        document.addEventListener("DOMContentLoaded", dl);
        window.addEventListener('touchmove' || 'touchdowm' || 'touchend' || 'mousedown', ev => {
            if (1) {
                ev.preventDefault();
                ev.stopImmediatePropagation();
            };
        }, {
            passive: false
        });
        const reset = () => {

            elapsed = 0;
            start = undefined;
            ar = [];
            document.getElementById('score').innerHTML = score;
            counttime = 300;
            counttime2 = 100;
            w = 0;


            // c('c=2;c*2;c**=3;');
            // c('c=2;c*2;c**=3;');
            string = "14159265358979323846264338327950288419716939937510582097494459230781640628620899862803482534211706798214808651328230664709384460955058223172535940812848111745028410270193852110555964462294895493038196442881097566593344612847564823378678316527120190914564856692346034861045432664821339360726 024914127372458700660631558817488152092096282925409171536436 7892590360 0113305305 4882046652 1384146951 9415116094 3305727036 5759591953 0921861173 8193261179 3105118548 0744623799 6274956735 1885752724 8912279381 8301194912 9833673362 4406566430 8602139494 6395224737 1907021798 6094370277 0539217176 2931767523 8467481846 7669405132 0005681271 4526356082 7785771342 7577896091 7363717872 1468440901 2249534301 4654958537 1050792279 6892589235 4201995611 2129021960 8640344181 5981362977 4771309960 5187072113 4999999837 2978049951 0597317328 1609631859 5024459455 3469083026 4252230825 3344685035 2619311881 7101000313 7838752886 5875332083 8142061717 7669147303 5982534904 2875546873 1159562863 8823537875 9375195778 1857780532 1712268066 1300192787 6611195909 2164201989";
            string = string.replace(/\D/g, ''); // strip whitespaces, should've been done in string indata instead .. just lazy
            op = 0;

            // addition below
            // while (op < 1000) {
            //     mathie = string[op++] + "+" + string[op];
            //     if (eval(mathie) > 9) {
            //         mathie = string[--op] + '-' + string[++op];
            //     }
            //     if (eval(mathie) < 0) {
            //         mathie = string[--op];
            //     }
            //     c(mathie);
            //     op++;
            // }

            //multiplication below
            while (op < 1000) {
                mathie = string[op++] + "*" + string[op];
                c(mathie);
                op++;
            }


            v(ar.shift());

            //console.log('startscreen call');
            //		  startscreen(); // pink start screen overlay


        }

        function startscreen() {
            if (score > 0) {


                /* save hiscore to local storage*/
                // console.log("saving?");
                //console.log("hiscore" + hiscore);
                //console.log("score" + score);
                if (score >= hiscore) {
                    hiscore = score;
                    result = localStorage.setItem('hiscore', hiscore);
                    //console.log('saving code runned!');
                    //console.log(result);
                }

                document.getElementById('score3').innerHTML = score;


                document.getElementById('score3').innerHTML = score + "<br />";
                /*add each character with delay */

                var stripped = document.getElementById('score2').innerHTML.replace(/(<([^>]+)>)/ig, "");

                var i = 0;

                interval();

                function interval() {
                    var timecounter = 80
                    if (i < stripped.length) {
                        //+ "<br />" + document.getElementById('score2').innerHTML;

                        //strip all html tags from the string



                        document.getElementById('score3').innerHTML += stripped.substring(i, 1 + i);
                        // + document.getElementById('score3').innerHTML.substring(i + 1);
                        //						document.getElementById('score3').innerHTML += document.getElementById('score3').innerHTML.substring(0, i) + "|";


                        i++; // increment i




                        setTimeout(() => {
                            interval()
                        }, 7 > stripped.length - i ? timecounter += 270 : timecounter);


                    } else {
                        //clearInterval(interval);
                    }
                } // interval




            }
            document.getElementById('hiscore3').innerHTML = hiscore;
            document.getElementById('level3').innerHTML = level;
            setTimeout(() => document.getElementById('scoreoverlay').classList.add('show'), 90);
        }

        function newround() {
            document.getElementById('answer').value = '';
            document.getElementById('answer2').innerHTML = '_';

            score = 0;
            document.getElementById('score2').innerHTML = "😀<br />";




            delement = document.getElementById('scoreoverlay');
            //somehow this is not working.. 
            setTimeout(() => delement.classList.remove('show'), 30);


            reset();



            function step(timestamp) {
                if (start === undefined) {
                    start = timestamp;
                }
                elapsed = timestamp - start;
                if (previousTimeStamp !== timestamp) {
                    counttime2 = counttime - Math.ceil(speedish * elapsed);
                    if (counttime2 > maxcountime) {
                        counttime = counttime - 10;
                        counttime2 = maxcountime;
                    }
                    element = document.getElementById('timer');
                    element.style.width = counttime2 + 'px';
                    // element.style.backgroundColor = colortohex(123, 175 + Math.ceil(counttime2 / 3) % 65, 123);
                    // element.style.backgroundColor = colortohex(123, 175 + Math.ceil(counttime2 / 3) % 65, 123);
                    element.style.opacity = .004 * (elapsed % 1000);

                }
                if (counttime2 > 1) {
                    previousTimeStamp = timestamp
                    window.requestAnimationFrame(step);
                } else {

                    // GAME OVER!

                    // this logic below should be put elsewhere :-S
                    Array.from(document.getElementsByClassName("fox")).map(el => {
                        // el.addEventListener("animationend", function () {
                        el.innerHTML = "";

                        el.remove();
                        // }, false);




                    });
                    //	 reset();
                    startscreen();
                }
            }
            window.requestAnimationFrame(step);
        }

        function colortohex(red, green, blue) {
            return '#' + red.toString(16) +
                green.toString(16) +
                blue.toString(16);
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pizzicato/0.6.4/Pizzicato.js"></script>

    <script>
        var sound = new Pizzicato.Sound('https://s3-us-west-2.amazonaws.com/s.cdpn.io/3/success.mp3', function() {
            //     sound.play();
            // sound.sourceNode.playbackRate.value = 0.5;
            sound.attack = 0.9;
            // sound.decay = 0.6;
            // sound.cutoff = 600;
            sound.volume = 1.8;
            // sound.release = 0.4;
        });


        var flanger = new Pizzicato.Effects.Flanger({
            attack: 0.6,
            time: 12,
            speed: 0.001,
            depth: 0.02,
            feedback: 0.01,
            mix: 0.4
        });

        // sound.addEffect(flanger);

        var dubDelay = new Pizzicato.Effects.DubDelay({
            feedback: 0.74,
            // time: 0.84,
            time: 0.42,
            mix: .66,
            cutoff: 890
        });

        // var stereoDelay = new Pizzicato.Effects.StereoDelay({
        //         feedback: 0.79,
        //         // time: 0.84,
        //         time: 0.42,
        //         mix: .66,
        //         cutoff: 870
        //     });

        // soundx.addEffect(dubDelay);
        /*
                    var dubDelay2 = new Pizzicato.Effects.DubDelay({
                            feedback: 0.49,
                            time: 0.74 * 3,
                            mix: .48,
                            cutoff: 400
                        });

            sound.addEffect(dubDelay2);*/
        //  var dubDelay3 = new Pizzicato.Effects.DubDelay({
        //         feedback: 0.49,
        //         time: 0.74 * 4,
        //         mix: .42,
        //         cutoff: 500
        //     });
        // sound.addEffect(dubDelay3);


        var stereoPanner = new Pizzicato.Effects.StereoPanner({
            pan: -0.4
        });
        var stereoPanner2 = new Pizzicato.Effects.StereoPanner({
            pan: 0.4
        });


        function sethint() {
            let rightanswer = "" + document.getElementById('eval').value;

            // hmm just supports two character length
            if (rightanswer.length > 1) {
                // console.log("execs...");
                let hintpart = rightanswer.substr(0, 1);
                console.log(hintpart);
                document.getElementById('answer').value = hintpart;
                document.getElementById('answer2').innerHTML = hintpart + "_";
            } else {
                // console.log("execs...");
                // let hintpart = rightanswer.substr(0, 1);
                // console.log(hintpart);
                document.getElementById('answer').value = '';
                document.getElementById('answer2').innerHTML = '_';

            }
        }
    </script>
</body>

</html>
